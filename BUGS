- EOF during "a" text input returns nil without an error message
  instead of finishing the input (the same way that ".\n" does)
- EOF as command input always quits without checking whether the
  buffer has been modified (in ed, one EOF says "warning: file modified"
  and a second ^D quits if the buffer has not again been modified since the
  last ^D.
- A second "q" after "q"->"Buffer modified" should quit ed.
  This version refuses ever to quit with q if buffer modified.


TODO
- implement hierarchical module structure in a dir with init.lua
- eliminate get_tty_line() from regex.lua
- Implement shell escapes/piping (search for '!')
- Implement undo
- Implement commands as separate functions
